<section class="products-hero py-5 mb-5 shadow-sm" 
         style="background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1464226184884-fa280b87c399?auto=format&fit=crop&q=80&w=2070'); background-size: cover; background-position: center; min-height: 300px;">
  <div class="container text-center py-5 animate__animated animate__fadeIn">
    <h1 class="display-3 fw-bold text-white mb-2">
      <span class="text-success">Farm</span> Store
    </h1>
    <p class="lead text-white-50 mx-auto fs-4" style="max-width: 600px;">
      Premium seeds, organic fertilizers, and smart tools delivered to your field.
    </p>
  </div>
</section>

<div class="container pb-5">
  <div class="row mb-5 align-items-end animate-fade-in">
    <div class="col-md-6">
      <span class="badge bg-success-subtle text-success px-3 py-2 rounded-pill mb-2 fw-bold ls-1 text-uppercase">Marketplace</span>
      <h2 class="fw-bold text-dark mb-0">Available Supplies</h2>
      <div class="bg-success rounded-pill mt-2" style="height: 4px; width: 50px;"></div>
    </div>
    <div class="col-md-6 text-md-end mt-3 mt-md-0">
      <p class="text-muted small mb-0">Showing {{ products.length }} high-quality items</p>
    </div>
  </div>

  <div class="row g-4" *ngIf="products.length > 0; else noProducts">
    <div class="col-12 col-md-6 col-lg-4 animate-slide-up" *ngFor="let product of products">
      <div class="product-card-wrapper h-100 transition-hover">
        <app-card [data]="product"></app-card>
      </div>
    </div>
  </div>

  <ng-template #noProducts>
    <div class="text-center py-5 animate-fade-in">
      <div class="mb-4">
        <i class="fa-solid fa-seedling text-light-subtle" style="font-size: 7rem;"></i>
      </div>
      <h3 class="fw-bold text-secondary">The barn is empty!</h3>
      <p class="text-muted">We couldn't find any products matching your criteria. Please check back soon.</p>
      <button class="btn btn-success rounded-pill px-5 py-2 mt-3 shadow" (click)="refreshProducts()">
        <i class="fa-solid fa-arrows-rotate me-2"></i>Refresh Store
      </button>
    </div>
  </ng-template>

  <div *ngIf="isLoading" class="text-center my-5 py-5">
    <div class="spinner-grow text-success" role="status" style="width: 3rem; height: 3rem;">
      <span class="visually-hidden">Loading products...</span>
    </div>
    <p class="mt-3 text-muted fw-bold">Gathering the best supplies for you...</p>
  </div>
</div>